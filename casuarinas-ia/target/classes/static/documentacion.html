<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentaci√≥n T√©cnica - Las Casuarinas IA</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #d35400 0%, #e67e22 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .nav {
            background: #34495e;
            padding: 15px;
            text-align: center;
        }
        .nav a {
            color: white;
            text-decoration: none;
            margin: 0 20px;
            padding: 10px 20px;
            border-radius: 25px;
            transition: background 0.3s;
        }
        .nav a:hover {
            background: #e67e22;
        }
        .content {
            padding: 40px;
        }
        .section {
            margin-bottom: 40px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #e67e22;
        }
        .section h2 {
            color: #d35400;
            margin-top: 0;
            font-size: 1.8em;
            border-bottom: 2px solid #e67e22;
            padding-bottom: 10px;
        }
        .section h3 {
            color: #2c3e50;
            margin-top: 25px;
        }
        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.4;
        }
        .highlight {
            background: #f39c12;
            color: white;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: bold;
        }
        .concept-box {
            background: #e8f4fd;
            border: 1px solid #3498db;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        .concept-box h4 {
            color: #2980b9;
            margin-top: 0;
        }
        .file-structure {
            background: #f1f2f6;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            font-family: monospace;
        }
        .toc {
            background: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        .toc ul {
            list-style: none;
            padding-left: 0;
        }
        .toc li {
            margin: 8px 0;
        }
        .toc a {
            color: #2c3e50;
            text-decoration: none;
            font-weight: 500;
        }
        .toc a:hover {
            color: #e67e22;
        }
        .back-button {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #e67e22;
            color: white;
            padding: 15px 25px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }
        .back-button:hover {
            background: #d35400;
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-button">‚Üê Volver a Las Casuarinas</a>
    
    <div class="container">
        <div class="header">
            <h1>üìö Documentaci√≥n T√©cnica</h1>
            <p>Sistema de Gesti√≥n Las Casuarinas - Explicaci√≥n Completa de POO y SQL</p>
        </div>

        <div class="nav">
            <a href="#introduccion">Introducci√≥n</a>
            <a href="#arquitectura">Arquitectura</a>
            <a href="#poo">Programaci√≥n Orientada a Objetos</a>
            <a href="#sql">Base de Datos SQL</a>
            <a href="#codigo">An√°lisis de C√≥digo</a>
            <a href="#patrones">Patrones de Dise√±o</a>
        </div>

        <div class="content">
            <div class="toc">
                <h3>üìã √çndice de Contenidos</h3>
                <ul>
                    <li><a href="#introduccion">1. Introducci√≥n al Proyecto</a></li>
                    <li><a href="#arquitectura">2. Arquitectura del Sistema</a></li>
                    <li><a href="#poo">3. Conceptos de Programaci√≥n Orientada a Objetos</a></li>
                    <li><a href="#sql">4. Conceptos de Base de Datos SQL</a></li>
                    <li><a href="#codigo">5. An√°lisis Detallado del C√≥digo</a></li>
                    <li><a href="#patrones">6. Patrones de Dise√±o Implementados</a></li>
                </ul>
            </div>

            <div id="introduccion" class="section">
                <h2>üéØ 1. Introducci√≥n al Proyecto</h2>
                <p>El sistema <strong>Las Casuarinas IA</strong> es una aplicaci√≥n web desarrollada con <span class="highlight">Spring Boot</span> que implementa un sistema de gesti√≥n de productos y pedidos para una tienda de productos naturales.</p>
                
                <div class="concept-box">
                    <h4>üéØ Objetivos del Proyecto</h4>
                    <ul>
                        <li>Demostrar conceptos de <strong>Programaci√≥n Orientada a Objetos (POO)</strong></li>
                        <li>Implementar operaciones de <strong>Base de Datos SQL</strong> usando JPA/Hibernate</li>
                        <li>Crear una <strong>API REST</strong> funcional</li>
                        <li>Desarrollar una <strong>interfaz web</strong> interactiva</li>
                        <li>Mostrar patrones de dise√±o en la pr√°ctica</li>
                    </ul>
                </div>

                <h3>üõ†Ô∏è Tecnolog√≠as Utilizadas</h3>
                <div class="code-block">
<strong>Backend:</strong>
- Java 17
- Spring Boot 3.2.5
- Spring Data JPA
- Hibernate ORM
- H2 Database
- Maven

<strong>Frontend:</strong>
- HTML5
- CSS3
- JavaScript ES6+
- Fetch API

<strong>Base de Datos:</strong>
- H2 (In-memory + File-based)
- SQL (DDL, DML, DQL)
</div>
            </div>

            <div id="arquitectura" class="section">
                <h2>üèóÔ∏è 2. Arquitectura del Sistema</h2>
                
                <h3>üìÅ Estructura del Proyecto</h3>
                <div class="file-structure">
src/
‚îú‚îÄ‚îÄ main/
‚îÇ   ‚îú‚îÄ‚îÄ java/com/casuarinas/app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ App.java                    # Clase principal Spring Boot
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ model/                      # Entidades (POO)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Producto.java           # Entidad base
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Pedido.java             # Entidad pedidos
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Cliente.java            # Entidad clientes
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [Productos espec√≠ficos] # Miel, Huevos12, etc.
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repo/                       # Repositorios (Data Access)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProductoRepo.java       # Acceso a datos productos
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PedidoRepo.java         # Acceso a datos pedidos
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ClienteRepo.java        # Acceso a datos clientes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ web/                        # Controladores REST
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProductoController.java # API productos
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PedidoController.java   # API pedidos
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ClienteController.java  # API clientes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ boot/                       # Configuraci√≥n inicial
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ DataLoader.java         # Carga datos iniciales
‚îÇ   ‚îî‚îÄ‚îÄ resources/
‚îÇ       ‚îú‚îÄ‚îÄ application.properties      # Configuraci√≥n BD
‚îÇ       ‚îî‚îÄ‚îÄ static/                     # Archivos web
‚îÇ           ‚îú‚îÄ‚îÄ index.html              # P√°gina principal
‚îÇ           ‚îú‚îÄ‚îÄ admin.html              # Panel administraci√≥n
‚îÇ           ‚îî‚îÄ‚îÄ documentacion.html      # Esta documentaci√≥n
‚îî‚îÄ‚îÄ pom.xml                            # Configuraci√≥n Maven
</div>

                <h3>üîÑ Flujo de Datos</h3>
                <div class="concept-box">
                    <h4>üìä Flujo Completo del Sistema</h4>
                    <ol>
                        <li><strong>Cliente Web</strong> ‚Üí Solicita p√°gina HTML</li>
                        <li><strong>Spring Boot</strong> ‚Üí Sirve archivos est√°ticos</li>
                        <li><strong>JavaScript</strong> ‚Üí Hace peticiones AJAX a API REST</li>
                        <li><strong>Controladores</strong> ‚Üí Procesan peticiones HTTP</li>
                        <li><strong>Repositorios</strong> ‚Üí Acceden a base de datos</li>
                        <li><strong>Hibernate</strong> ‚Üí Genera consultas SQL autom√°ticamente</li>
                        <li><strong>H2 Database</strong> ‚Üí Ejecuta consultas y devuelve datos</li>
                        <li><strong>JSON Response</strong> ‚Üí Datos vuelven al frontend</li>
                        <li><strong>DOM Update</strong> ‚Üí Interfaz se actualiza din√°micamente</li>
                    </ol>
                </div>
            </div>

            <div id="poo" class="section">
                <h2>üéØ 3. Conceptos de Programaci√≥n Orientada a Objetos</h2>
                
                <h3>üèõÔ∏è Principios Fundamentales de POO</h3>
                
                <div class="concept-box">
                    <h4>1. üì¶ Encapsulaci√≥n (Encapsulation)</h4>
                    <p><strong>Definici√≥n:</strong> Ocultar los detalles internos de una clase y exponer solo lo necesario.</p>
                    <p><strong>En nuestro c√≥digo:</strong></p>
                    <div class="code-block">
// Ejemplo en Producto.java
public class Producto {
    private Long id;           // Campo privado - no accesible desde fuera
    private String nombre;     // Campo privado
    private Double precio;     // Campo privado
    
    // M√©todos p√∫blicos para acceder a los datos privados
    public Long getId() { return id; }           // Getter
    public void setId(Long id) { this.id = id; } // Setter
}
                    </div>
                    <p><strong>Beneficio:</strong> Control total sobre c√≥mo se accede y modifica la informaci√≥n.</p>
                </div>

                <div class="concept-box">
                    <h4>2. üß¨ Herencia (Inheritance)</h4>
                    <p><strong>Definici√≥n:</strong> Una clase puede heredar propiedades y m√©todos de otra clase.</p>
                    <p><strong>En nuestro c√≥digo:</strong></p>
                    <div class="code-block">
// ProductoRepo hereda de JpaRepository
public interface ProductoRepo extends JpaRepository&lt;Producto, Long&gt; {
    // Hereda m√©todos como: save(), findAll(), deleteById(), etc.
    // Y agrega m√©todos espec√≠ficos
    List&lt;Producto&gt; findByNombreContainingIgnoreCase(String nombre);
}
                    </div>
                    <p><strong>Beneficio:</strong> Reutilizaci√≥n de c√≥digo y extensibilidad.</p>
                </div>

                <div class="concept-box">
                    <h4>3. üîÑ Polimorfismo (Polymorphism)</h4>
                    <p><strong>Definici√≥n:</strong> Un objeto puede comportarse de diferentes maneras seg√∫n el contexto.</p>
                    <p><strong>En nuestro c√≥digo:</strong></p>
                    <div class="code-block">
// @RestController implementa la interfaz de controlador de Spring
@RestController
public class ProductoController {
    // El mismo m√©todo puede manejar diferentes tipos de peticiones
    @GetMapping
    public List&lt;Producto&gt; getAll() { ... }
    
    @PostMapping  
    public Producto create(@RequestBody Producto producto) { ... }
}
                    </div>
                    <p><strong>Beneficio:</strong> Flexibilidad y c√≥digo m√°s mantenible.</p>
                </div>

                <div class="concept-box">
                    <h4>4. üîß Abstracci√≥n (Abstraction)</h4>
                    <p><strong>Definici√≥n:</strong> Ocultar la complejidad y mostrar solo las caracter√≠sticas esenciales.</p>
                    <p><strong>En nuestro c√≥digo:</strong></p>
                    <div class="code-block">
// @Entity abstrae la complejidad de mapeo objeto-relacional
@Entity
@Table(name = "producto")
public class Producto {
    // Spring Boot maneja autom√°ticamente:
    // - Creaci√≥n de tabla SQL
    // - Mapeo de campos
    // - Consultas autom√°ticas
}
                    </div>
                    <p><strong>Beneficio:</strong> Simplifica el desarrollo y reduce la complejidad.</p>
                </div>

                <h3>üèóÔ∏è Patrones de Dise√±o Implementados</h3>
                
                <div class="concept-box">
                    <h4>1. üè≠ Patr√≥n Factory</h4>
                    <p><strong>Definici√≥n:</strong> Crea objetos sin especificar su clase exacta.</p>
                    <div class="code-block">
// @SpringBootApplication act√∫a como Factory
@SpringBootApplication
public class App {
    public static void main(String[] args) {
        // Spring crea autom√°ticamente todos los beans necesarios
        SpringApplication.run(App.class, args);
    }
}
                    </div>
                </div>

                <div class="concept-box">
                    <h4>2. üíâ Patr√≥n Dependency Injection</h4>
                    <p><strong>Definici√≥n:</strong> Las dependencias se inyectan desde afuera, no se crean internamente.</p>
                    <div class="code-block">
@RestController
public class ProductoController {
    @Autowired  // Spring inyecta autom√°ticamente esta dependencia
    private ProductoRepo repo;
    
    // No necesitamos: repo = new ProductoRepo();
    // Spring lo hace por nosotros
}
                    </div>
                </div>

                <div class="concept-box">
                    <h4>3. üéØ Patr√≥n MVC (Model-View-Controller)</h4>
                    <p><strong>Definici√≥n:</strong> Separa la l√≥gica de negocio, presentaci√≥n y control.</p>
                    <div class="code-block">
<strong>Model:</strong> Producto.java, Pedido.java (Entidades)
<strong>View:</strong> index.html, admin.html (Interfaz web)  
<strong>Controller:</strong> ProductoController.java (L√≥gica de control)
                    </div>
                </div>

                <div class="concept-box">
                    <h4>4. üìö Patr√≥n Repository</h4>
                    <p><strong>Definici√≥n:</strong> Abstrae la l√≥gica de acceso a datos.</p>
                    <div class="code-block">
public interface ProductoRepo extends JpaRepository&lt;Producto, Long&gt; {
    // Abstrae todas las operaciones de base de datos
    List&lt;Producto&gt; findByActivoTrue();
    List&lt;Producto&gt; findByCategoria(String categoria);
    // Spring genera autom√°ticamente la implementaci√≥n
}
                    </div>
                </div>
            </div>

            <div id="sql" class="section">
                <h2>üóÑÔ∏è 4. Conceptos de Base de Datos SQL</h2>
                
                <h3>üìä Tipos de Consultas SQL</h3>
                
                <div class="concept-box">
                    <h4>1. üìù DDL (Data Definition Language)</h4>
                    <p><strong>Definici√≥n:</strong> Comandos para definir la estructura de la base de datos.</p>
                    <div class="code-block">
-- CREATE TABLE (creado autom√°ticamente por Hibernate)
CREATE TABLE producto (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(255),
    precio DOUBLE,
    activo BOOLEAN,
    creado TIMESTAMP,
    actualizado TIMESTAMP
);

-- ALTER TABLE (modificaciones de estructura)
ALTER TABLE producto ADD COLUMN categoria VARCHAR(100);
                    </div>
                    <p><strong>En nuestro c√≥digo:</strong> Hibernate genera autom√°ticamente estas consultas bas√°ndose en las anotaciones @Entity.</p>
                </div>

                <div class="concept-box">
                    <h4>2. üîç DQL (Data Query Language)</h4>
                    <p><strong>Definici√≥n:</strong> Comandos para consultar datos.</p>
                    <div class="code-block">
-- SELECT b√°sico
SELECT * FROM producto WHERE activo = true;

-- SELECT con filtros
SELECT * FROM producto 
WHERE nombre LIKE '%miel%' 
AND categoria = 'Miel' 
AND activo = true;

-- SELECT con ordenamiento
SELECT * FROM producto 
ORDER BY precio DESC, nombre ASC;
                    </div>
                    <p><strong>En nuestro c√≥digo:</strong> Los m√©todos del repositorio generan autom√°ticamente estas consultas.</p>
                </div>

                <div class="concept-box">
                    <h4>3. ‚úèÔ∏è DML (Data Manipulation Language)</h4>
                    <p><strong>Definici√≥n:</strong> Comandos para modificar datos.</p>
                    <div class="code-block">
-- INSERT (crear nuevos registros)
INSERT INTO producto (nombre, precio, activo, creado) 
VALUES ('Miel', 330.0, true, CURRENT_TIMESTAMP);

-- UPDATE (modificar registros existentes)
UPDATE producto 
SET activo = false, actualizado = CURRENT_TIMESTAMP 
WHERE id = 1;

-- DELETE (eliminar registros)
DELETE FROM producto WHERE id = 1;
                    </div>
                    <p><strong>En nuestro c√≥digo:</strong> Los m√©todos save() y deleteById() ejecutan estas operaciones.</p>
                </div>

                <h3>üîó Mapeo Objeto-Relacional (ORM)</h3>
                
                <div class="concept-box">
                    <h4>üìã Anotaciones JPA/Hibernate</h4>
                    <div class="code-block">
@Entity                    // Marca la clase como entidad de base de datos
@Table(name = "producto")  // Especifica el nombre de la tabla
public class Producto {
    @Id                     // Marca como clave primaria
    @GeneratedValue         // Generaci√≥n autom√°tica de ID
    private Long id;
    
    @Column(name = "nombre") // Mapea a columna espec√≠fica
    private String nombre;
    
    @Lob                    // Para campos de texto largo (CLOB)
    private String comentario;
    
    @PreUpdate              // Ejecuta antes de actualizar
    public void preUpdate() {
        this.actualizado = LocalDateTime.now();
    }
}
                    </div>
                </div>

                <h3>üîÑ Transacciones</h3>
                <div class="concept-box">
                    <h4>‚ö° Gesti√≥n Autom√°tica de Transacciones</h4>
                    <p><strong>Definici√≥n:</strong> Spring maneja autom√°ticamente las transacciones de base de datos.</p>
                    <div class="code-block">
@Transactional  // Spring maneja la transacci√≥n autom√°ticamente
public Producto save(Producto producto) {
    // Si algo falla, toda la operaci√≥n se revierte (ROLLBACK)
    // Si todo va bien, se confirma (COMMIT)
    return productoRepo.save(producto);
}
                    </div>
                </div>
            </div>

            <div id="codigo" class="section">
                <h2>üíª 5. An√°lisis Detallado del C√≥digo</h2>
                
                <h3>üè† Clase Principal - App.java</h3>
                <div class="code-block">
package com.casuarinas.app;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

/**
 * CLASE PRINCIPAL SPRING BOOT - PROGRAMACI√ìN ORIENTADA A OBJETOS
 * 
 * Esta es la clase de entrada de la aplicaci√≥n Spring Boot.
 * Implementa el patr√≥n Singleton y Factory para la inicializaci√≥n.
 * 
 * RELACI√ìN CON POO:
 * - @SpringBootApplication: Anotaci√≥n que configura autom√°ticamente la aplicaci√≥n
 * - Singleton: Solo existe una instancia de la aplicaci√≥n
 * - Factory: Spring crea todos los beans necesarios
 * - Main Method: Punto de entrada est√°tico
 * 
 * RELACI√ìN CON SQL:
 * - Configura autom√°ticamente la conexi√≥n a base de datos H2
 * - Inicializa JPA/Hibernate para mapeo objeto-relacional
 * - Crea las tablas SQL autom√°ticamente
 */
@SpringBootApplication  // ANOTACI√ìN SPRING: Configuraci√≥n autom√°tica
public class App {
    public static void main(String[] args) {
        // M√âTODO MAIN - PUNTO DE ENTRADA DE LA APLICACI√ìN
        // Spring Boot inicializa autom√°ticamente:
        // - Servidor web embebido (Tomcat)
        // - Conexi√≥n a base de datos
        // - Configuraci√≥n JPA/Hibernate
        // - Carga de beans y dependencias
        SpringApplication.run(App.class, args);
    }
}
                </div>

                <h3>üì¶ Entidad Base - Producto.java</h3>
                <div class="code-block">
package com.casuarinas.app.model;

import jakarta.persistence.*;
import java.time.LocalDateTime;

/**
 * ENTIDAD PRODUCTO - PROGRAMACI√ìN ORIENTADA A OBJETOS
 * 
 * Esta clase representa un producto en el sistema.
 * Implementa el patr√≥n Active Record para persistencia.
 * 
 * RELACI√ìN CON POO:
 * - @Entity: Convierte la clase en una entidad persistente
 * - Encapsulaci√≥n: Campos privados con getters/setters p√∫blicos
 * - Builder Pattern: Constructor con valores por defecto
 * - Observer Pattern: @PreUpdate se ejecuta autom√°ticamente
 * - Domain Model: Representa un concepto del dominio de negocio
 * 
 * RELACI√ìN CON SQL:
 * - @Entity: Genera una tabla SQL llamada "producto"
 * - @Id + @GeneratedValue: Crea columna ID auto-incremental
 * - Cada campo se mapea a una columna en la tabla
 * - @PreUpdate: Ejecuta UPDATE autom√°tico antes de guardar
 */
@Entity  // ANOTACI√ìN JPA: Marca como entidad de base de datos
@Table(name = "producto")  // ANOTACI√ìN JPA: Nombre de la tabla SQL
public class Producto {
    
    @Id  // ANOTACI√ìN JPA: Clave primaria
    @GeneratedValue(strategy = GenerationType.IDENTITY)  // ANOTACI√ìN JPA: Auto-incremento
    private Long id;
    
    private String nombre;
    private Double precio;
    private String comentario;
    private String categoria;
    private String unidad;
    private Boolean activo = true;  // VALOR POR DEFECTO
    private LocalDateTime creado = LocalDateTime.now();  // TIMESTAMP AUTOM√ÅTICO
    private LocalDateTime actualizado;
    
    // CONSTRUCTOR POR DEFECTO - REQUERIDO POR JPA
    public Producto() {}
    
    // CONSTRUCTOR CON PAR√ÅMETROS - PATR√ìN BUILDER
    public Producto(String nombre, Double precio, String comentario, 
                   String categoria, String unidad) {
        this.nombre = nombre;
        this.precio = precio;
        this.comentario = comentario;
        this.categoria = categoria;
        this.unidad = unidad;
        this.activo = true;
        this.creado = LocalDateTime.now();
    }
    
    // GETTERS Y SETTERS - ENCAPSULACI√ìN
    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }
    
    public String getNombre() { return nombre; }
    public void setNombre(String nombre) { this.nombre = nombre; }
    
    // ... m√°s getters y setters
    
    // M√âTODO CALLBACK - PATR√ìN OBSERVER
    @PreUpdate  // ANOTACI√ìN JPA: Se ejecuta antes de actualizar
    public void preUpdate() {
        this.actualizado = LocalDateTime.now();
    }
}
                </div>

                <h3>üéÆ Controlador REST - ProductoController.java</h3>
                <div class="code-block">
package com.casuarinas.app.web;

import com.casuarinas.app.model.Producto;
import com.casuarinas.app.repo.ProductoRepo;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;
import java.util.List;

/**
 * CONTROLADOR REST PRODUCTO - PROGRAMACI√ìN ORIENTADA A OBJETOS
 * 
 * Esta clase maneja las peticiones HTTP relacionadas con productos.
 * Implementa el patr√≥n MVC (Model-View-Controller).
 * 
 * RELACI√ìN CON POO:
 * - @RestController: Convierte la clase en un controlador REST
 * - Dependency Injection: @Autowired inyecta dependencias
 * - Encapsulaci√≥n: M√©todos privados para l√≥gica interna
 * - Polimorfismo: Implementa interfaz de controlador REST
 * - Separation of Concerns: Solo maneja peticiones HTTP
 * 
 * RELACI√ìN CON SQL:
 * - Cada endpoint ejecuta consultas SQL a trav√©s del repositorio
 * - @GetMapping: Genera consultas SELECT SQL
 * - @PostMapping: Genera consultas INSERT SQL
 * - @PutMapping: Genera consultas UPDATE SQL
 * - @DeleteMapping: Genera consultas DELETE SQL
 */
@RestController  // ANOTACI√ìN SPRING: Controlador REST
@RequestMapping("/api/productos")  // ANOTACI√ìN SPRING: Ruta base
public class ProductoController {
    
    @Autowired  // ANOTACI√ìN SPRING: Inyecci√≥n de dependencias
    private ProductoRepo repo;
    
    /**
     * M√âTODO GET - OPERACI√ìN CRUD (READ)
     * Maneja peticiones GET a /api/productos
     */
    @GetMapping  // ANOTACI√ìN SPRING: Mapea peticiones GET
    public List&lt;Producto&gt; getAll(
        @RequestParam(required = false) String nombre,
        @RequestParam(required = false) String categoria
    ) {
        // L√ìGICA DE NEGOCIO - POO
        if (nombre != null && !nombre.isEmpty() && 
            categoria != null && !categoria.isEmpty()) {
            // CONSULTA SQL: SELECT * FROM producto WHERE nombre LIKE '%?%' AND categoria = ? AND activo = true
            return repo.findByNombreContainingIgnoreCaseAndCategoriaAndActivoTrue(nombre, categoria);
        } else if (nombre != null && !nombre.isEmpty()) {
            // CONSULTA SQL: SELECT * FROM producto WHERE nombre LIKE '%?%' AND activo = true
            return repo.findByNombreContainingIgnoreCaseAndActivoTrue(nombre);
        } else if (categoria != null && !categoria.isEmpty()) {
            // CONSULTA SQL: SELECT * FROM producto WHERE categoria = ? AND activo = true
            return repo.findByCategoriaAndActivoTrue(categoria);
        } else {
            // CONSULTA SQL: SELECT * FROM producto WHERE activo = true
            return repo.findByActivoTrue();
        }
    }
    
    /**
     * M√âTODO POST - OPERACI√ìN CRUD (CREATE)
     * Maneja peticiones POST a /api/productos
     */
    @PostMapping  // ANOTACI√ìN SPRING: Mapea peticiones POST
    public Producto create(@RequestBody Producto producto) {
        // CONSULTA SQL: INSERT INTO producto (nombre, precio, ...) VALUES (?, ?, ...)
        return repo.save(producto);
    }
    
    /**
     * M√âTODO PUT - OPERACI√ìN CRUD (UPDATE)
     * Maneja peticiones PUT a /api/productos/{id}
     */
    @PutMapping("/{id}")  // ANOTACI√ìN SPRING: Mapea peticiones PUT con par√°metro
    public Producto update(@PathVariable Long id, @RequestBody Producto producto) {
        producto.setId(id);
        // CONSULTA SQL: UPDATE producto SET nombre = ?, precio = ?, ... WHERE id = ?
        return repo.save(producto);
    }
    
    /**
     * M√âTODO DELETE - OPERACI√ìN CRUD (DELETE)
     * Maneja peticiones DELETE a /api/productos/{id}
     */
    @DeleteMapping("/{id}")  // ANOTACI√ìN SPRING: Mapea peticiones DELETE
    public void delete(@PathVariable Long id) {
        // CONSULTA SQL: DELETE FROM producto WHERE id = ?
        repo.deleteById(id);
    }
}
                </div>

                <h3>üóÉÔ∏è Repositorio - ProductoRepo.java</h3>
                <div class="code-block">
package com.casuarinas.app.repo;

import com.casuarinas.app.model.Producto;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.stereotype.Repository;
import java.util.List;

/**
 * REPOSITORIO PRODUCTO - PROGRAMACI√ìN ORIENTADA A OBJETOS
 * 
 * Esta interfaz define las operaciones de acceso a datos para productos.
 * Implementa el patr√≥n Repository para abstraer la l√≥gica de persistencia.
 * 
 * RELACI√ìN CON POO:
 * - Herencia: Extiende JpaRepository para obtener funcionalidad base
 * - Polimorfismo: Implementa diferentes m√©todos de consulta
 * - Encapsulaci√≥n: Abstrae la complejidad de acceso a datos
 * - Interface Segregation: Define solo los m√©todos necesarios
 * 
 * RELACI√ìN CON SQL:
 * - Spring Data JPA genera autom√°ticamente consultas SQL
 * - Query Methods: Los nombres de m√©todos se convierten en consultas
 * - JDBC: Utiliza JDBC internamente para conectar con la base de datos
 * - Transaction Management: Maneja transacciones autom√°ticamente
 */
@Repository  // ANOTACI√ìN SPRING: Marca como componente de acceso a datos
public interface ProductoRepo extends JpaRepository&lt;Producto, Long&gt; {
    
    /**
     * M√âTODO DE CONSULTA PERSONALIZADO - PROGRAMACI√ìN ORIENTADA A OBJETOS
     * 
     * Spring Data JPA genera autom√°ticamente la implementaci√≥n de este m√©todo
     * bas√°ndose en el nombre del m√©todo.
     * 
     * RELACI√ìN CON POO:
     * - Query Method: El nombre del m√©todo define la consulta
     * - Polimorfismo: Diferentes implementaciones seg√∫n el tipo de consulta
     * - Encapsulaci√≥n: Oculta la complejidad de generaci√≥n de consultas
     * 
     * RELACI√ìN CON SQL:
     * - Genera: SELECT * FROM producto WHERE nombre LIKE '%?%' AND activo = true
     * - Par√°metros: Se mapean autom√°ticamente a la consulta SQL
     * - Resultado: Lista de productos que coinciden con los criterios
     */
    List&lt;Producto&gt; findByNombreContainingIgnoreCaseAndActivoTrue(String nombre);
    
    /**
     * M√âTODO DE CONSULTA POR CATEGOR√çA
     * 
     * RELACI√ìN CON SQL:
     * - Genera: SELECT * FROM producto WHERE categoria = ? AND activo = true
     */
    List&lt;Producto&gt; findByCategoriaAndActivoTrue(String categoria);
    
    /**
     * M√âTODO DE CONSULTA COMBINADA
     * 
     * RELACI√ìN CON SQL:
     * - Genera: SELECT * FROM producto WHERE nombre LIKE '%?%' AND categoria = ? AND activo = true
     */
    List&lt;Producto&gt; findByNombreContainingIgnoreCaseAndCategoriaAndActivoTrue(String nombre, String categoria);
    
    /**
     * M√âTODO DE CONSULTA SIMPLE
     * 
     * RELACI√ìN CON SQL:
     * - Genera: SELECT * FROM producto WHERE activo = true
     */
    List&lt;Producto&gt; findByActivoTrue();
}
                </div>
            </div>

            <div id="patrones" class="section">
                <h2>üé® 6. Patrones de Dise√±o Implementados</h2>
                
                <h3>üèóÔ∏è Patrones Creacionales</h3>
                
                <div class="concept-box">
                    <h4>1. üè≠ Factory Method</h4>
                    <p><strong>Implementaci√≥n:</strong> @SpringBootApplication act√∫a como factory para crear beans.</p>
                    <div class="code-block">
@SpringBootApplication
public class App {
    public static void main(String[] args) {
        // Spring Factory crea autom√°ticamente:
        // - ProductoController
        // - ProductoRepo
        // - DataSource
        // - EntityManager
        SpringApplication.run(App.class, args);
    }
}
                    </div>
                </div>

                <div class="concept-box">
                    <h4>2. üèóÔ∏è Builder Pattern</h4>
                    <p><strong>Implementaci√≥n:</strong> Constructores con par√°metros opcionales.</p>
                    <div class="code-block">
public class Producto {
    public Producto(String nombre, Double precio, String comentario, 
                   String categoria, String unidad) {
        this.nombre = nombre;
        this.precio = precio;
        this.comentario = comentario;
        this.categoria = categoria;
        this.unidad = unidad;
        this.activo = true;  // Valor por defecto
        this.creado = LocalDateTime.now();  // Valor por defecto
    }
}
                    </div>
                </div>

                <h3>üèõÔ∏è Patrones Estructurales</h3>
                
                <div class="concept-box">
                    <h4>1. üíâ Dependency Injection</h4>
                    <p><strong>Implementaci√≥n:</strong> @Autowired inyecta dependencias autom√°ticamente.</p>
                    <div class="code-block">
@RestController
public class ProductoController {
    @Autowired  // Spring inyecta esta dependencia
    private ProductoRepo repo;
    
    // No necesitamos: repo = new ProductoRepoImpl();
    // Spring lo hace por nosotros
}
                    </div>
                </div>

                <div class="concept-box">
                    <h4>2. üéØ MVC (Model-View-Controller)</h4>
                    <p><strong>Implementaci√≥n:</strong> Separaci√≥n clara de responsabilidades.</p>
                    <div class="code-block">
<strong>Model (Modelo):</strong>
- Producto.java, Pedido.java, Cliente.java
- Representan los datos del negocio

<strong>View (Vista):</strong>
- index.html, admin.html
- Interfaz de usuario

<strong>Controller (Controlador):</strong>
- ProductoController.java, PedidoController.java
- Manejan la l√≥gica de negocio y peticiones HTTP
                    </div>
                </div>

                <h3>üé≠ Patrones de Comportamiento</h3>
                
                <div class="concept-box">
                    <h4>1. üìö Repository Pattern</h4>
                    <p><strong>Implementaci√≥n:</strong> Abstrae el acceso a datos.</p>
                    <div class="code-block">
public interface ProductoRepo extends JpaRepository&lt;Producto, Long&gt; {
    // Abstrae todas las operaciones de base de datos
    // Spring genera autom√°ticamente la implementaci√≥n
    List&lt;Producto&gt; findByActivoTrue();
}
                    </div>
                </div>

                <div class="concept-box">
                    <h4>2. üëÅÔ∏è Observer Pattern</h4>
                    <p><strong>Implementaci√≥n:</strong> @PreUpdate se ejecuta autom√°ticamente.</p>
                    <div class="code-block">
@Entity
public class Producto {
    @PreUpdate  // Se ejecuta autom√°ticamente antes de actualizar
    public void preUpdate() {
        this.actualizado = LocalDateTime.now();
    }
}
                    </div>
                </div>

                <h3>üåê Patrones Web</h3>
                
                <div class="concept-box">
                    <h4>1. üîÑ RESTful API</h4>
                    <p><strong>Implementaci√≥n:</strong> Endpoints REST est√°ndar.</p>
                    <div class="code-block">
GET    /api/productos      ‚Üí Obtener todos los productos
GET    /api/productos/{id} ‚Üí Obtener producto por ID
POST   /api/productos      ‚Üí Crear nuevo producto
PUT    /api/productos/{id} ‚Üí Actualizar producto
DELETE /api/productos/{id} ‚Üí Eliminar producto
                    </div>
                </div>

                <div class="concept-box">
                    <h4>2. üé® Frontend-Backend Separation</h4>
                    <p><strong>Implementaci√≥n:</strong> Separaci√≥n clara entre frontend y backend.</p>
                    <div class="code-block">
<strong>Frontend (JavaScript):</strong>
- Hace peticiones AJAX a la API REST
- Maneja la interfaz de usuario
- Procesa respuestas JSON

<strong>Backend (Spring Boot):</strong>
- Proporciona API REST
- Maneja la l√≥gica de negocio
- Accede a la base de datos
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>üéì Resumen de Aprendizajes</h2>
                
                <div class="concept-box">
                    <h4>‚úÖ Conceptos de POO Aplicados</h4>
                    <ul>
                        <li><strong>Encapsulaci√≥n:</strong> Campos privados con getters/setters</li>
                        <li><strong>Herencia:</strong> Repositorios extienden JpaRepository</li>
                        <li><strong>Polimorfismo:</strong> Controladores implementan interfaces REST</li>
                        <li><strong>Abstracci√≥n:</strong> Anotaciones ocultan complejidad</li>
                        <li><strong>Composici√≥n:</strong> Clases compuestas por otras clases</li>
                    </ul>
                </div>

                <div class="concept-box">
                    <h4>‚úÖ Conceptos de SQL Aplicados</h4>
                    <ul>
                        <li><strong>DDL:</strong> Creaci√≥n autom√°tica de tablas</li>
                        <li><strong>DML:</strong> Operaciones INSERT, UPDATE, DELETE</li>
                        <li><strong>DQL:</strong> Consultas SELECT con filtros</li>
                        <li><strong>ORM:</strong> Mapeo objeto-relacional autom√°tico</li>
                        <li><strong>Transacciones:</strong> Gesti√≥n autom√°tica de transacciones</li>
                    </ul>
                </div>

                <div class="concept-box">
                    <h4>‚úÖ Patrones de Dise√±o Implementados</h4>
                    <ul>
                        <li><strong>Factory:</strong> @SpringBootApplication</li>
                        <li><strong>Dependency Injection:</strong> @Autowired</li>
                        <li><strong>MVC:</strong> Separaci√≥n Model-View-Controller</li>
                        <li><strong>Repository:</strong> Abstracci√≥n de acceso a datos</li>
                        <li><strong>Observer:</strong> @PreUpdate callbacks</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
